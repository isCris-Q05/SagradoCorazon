<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inicio</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
  </head>

  <body>
    <main class="main-body">
      <div class="sidebar">
        <div class="logo">üè• DermaCare</div>
        <nav>
          <a
            href="{% url 'inicio' %}"
            class="nav-item {% if request.path == '/' %}active{% endif %}"
            >Inicio</a
          >
          <a
            href="{% url 'doctores' %}"
            class="nav-item {% if request.path == '/doctores/' %}active{% endif %}"
            >Doctores</a
          >
          <a
            href="{% url 'productos' %}"
            class="nav-item {% if request.path == '/productos/' %}active{% endif %}"
            >Productos</a
          >
          <a
            href="{% url 'enfermedades_alergias' %}"
            class="nav-item {% if request.path == '/enfermedades-alergia/' %}active{% endif %}"
            >Alergias y Enfermedades</a
          >
          <a
            href="{% url 'tratamientos' %}"
            class="nav-item {% if request.path == '/tratamiento/' %}active{% endif %}"
            >Tratamientos</a
          >
        </nav>
      </div>
      <div class="main-content">
        <div class="top-bar">
          <h2>Inicio</h2>
          <div class="icons">
            <span class="user-name" style="font-weight: bold">{{ user.username }}</span>
            <a href="{% url 'logout' %}" class="logout-link">Cerrar sesi√≥n</a>
          </div>
        </div>
        <div class="header">
          <input type="text" placeholder="Buscar cita..." class="search-bar" />
          <button
            class="btn btn-primary"
            id="crearCitaBtn"
            data-bs-toggle="modal"
            data-bs-target="#crearCitaModal"
          >
            Crear Cita
          </button>
          <button
            class="btn btn-primary"
            id="crearRegistroBtn"
            data-bs-toggle="modal"
            data-bs-target="#crearRegistroModal"
          >
            Agregar Registro
          </button>
        </div>
        <table>
          <thead>
            <tr>
              <th>Nombre completo</th>
              <th>Descripcion</th>
              <th>Fecha</th>
              <th>Hora inicio</th>
              <th>Doctor asignado</th>
            </tr>
          </thead>
          <tbody>
            {% for cita in citas %}
            <tr>
              <td>{{ cita.id_paciente }}</td>
              <td>Cita</td>
              <td>{{ cita.fecha }}</td>
              <td>{{ cita.hora }}</td>
              <td>{{ cita.id_medico }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Barra de notificaciones -->
      <div
        id="notificationBar"
        class="card shadow-sm p-3 mb-5 bg-body-tertiary"
        style="
          display: none;
          position: absolute;
          top: 50px;
          right: 20px;
          width: 300px;
          z-index: 1050;
        "
      >
        <h5 class="card-title">Notificaciones</h5>
        <div class="card-text">
          {% for notificacion in notificaciones %}
          <p><strong>Paciente:</strong> {{ notificacion.paciente }}</p>
          <p><strong>Fecha:</strong> {{ notificacion.fecha }}</p>
          <p><strong>Hora:</strong> {{ notificacion.hora }}</p>
          <hr />
          {% endfor %}
        </div>
        <button class="btn btn-primary btn-sm w-100" id="clearNotifications">
          Cerrar
        </button>
      </div>

      <!-- Modal para mostrar Usuario -->
      <div
        class="modal fade"
        id="userModal"
        tabindex="-1"
        aria-labelledby="userModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="userModalLabel">
                Informaci√≥n del Usuario
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body text-center">
              <img
                src="{% static 'imagenes/usser.png' %}"
                alt="Foto de Usuario"
                class="img-fluid rounded-circle mb-3"
                style="width: 100px; height: 100px"
              />
              <h5 class="mb-3">{{ user.nombre }}</h5>
              <button
                type="button"
                id="cerrarSesionbtn"
                class="btn btn-danger w-100"
              >
                Cerrar Sesi√≥n
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal para Crear Cita -->
      <div
        class="modal fade"
        id="crearCitaModal"
        tabindex="-1"
        aria-labelledby="crearCitaModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="crearCitaModalLabel">Crear Cita</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Cerrar"
              ></button>
            </div>
            <div class="modal-body">
              <form method="POST" action="">
                {% csrf_token %}
                <div class="mb-3">
                  <label for="nombrePaciente" class="form-label"
                    >Nombre del Paciente</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="nombrePaciente"
                    placeholder="Ingrese el nombre del paciente"
                  />
                </div>
                <div class="mb-3">
                  <label for="nombrePaciente" class="form-label"
                    >Nombre del Medico asignado</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="nombreMedico"
                    placeholder="Ingrese el nombre del medico"
                  />
                </div>
                <div class="mb-3">
                  <label for="fechaCita" class="form-label"
                    >Fecha de la Cita</label
                  >
                  <input type="date" class="form-control" id="fechaCita" />
                </div>
                <div class="mb-3">
                  <label for="horaCita" class="form-label">Hora inicio</label>
                  <input type="time" class="form-control" id="horaCita" />
                </div>
                <div class="mb-3">
                  <label for="horaCita" class="form-label">Hora final</label>
                  <input type="time" class="form-control" id="horaCita" />
                </div>
                <div class="mb-3">
                  <label for="comentarios" class="form-label"
                    >Comentarios</label
                  >
                  <textarea
                    class="form-control"
                    id="comentarios"
                    rows="3"
                    placeholder="Detalles adicionales sobre su condicion"
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-success">
                  Guardar Cita
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!--Model para los registros-->
      <div
        class="modal fade"
        id="crearRegistroModal"
        tabindex="-1"
        aria-labelledby="crearRegistroModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="crearRegistroModalLabel">
                Agregar Registro
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Cerrar"
              ></button>
            </div>
            <div class="modal-body">
              <form method="POST" action="">
                <div class="mb-3">
                  <label for="nombrePaciente" class="form-label"
                    >Codigo cita</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="codigoCita"
                    placeholder="Ingrese el codigo de la cita"
                  />
                </div>
                <div class="mb-3">
                  <label for="Motivo" class="form-label">Motivo</label>
                  <input
                    type="text"
                    class="form-control"
                    id="Motivo"
                    placeholder="Motivo"
                  />
                </div>
                <div class="mb-3">
                  <label for="comentarios" class="form-label"
                    >Observaciones</label
                  >
                  <textarea
                    class="form-control"
                    id="observaciones"
                    rows="3"
                    placeholder="Observaciones "
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-success">
                  Agregar registro
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script src="{% static 'js/notificaciones.js' %}"></script>
  </body>
</html>
